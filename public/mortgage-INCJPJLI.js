import{b as c,d as p,e as y,f as m,h as g}from"./chunk-3E4EKIJL.js";import{f as a}from"./chunk-YTPAW67S.js";var f='* { margin: 0; padding: 0; border: 0; background: transparent; box-sizing: border-box; } body { font-family: var(--font-family); } .position-relative { position: relative; } .flex { display: flex; } .justify-end { justify-content: flex-end; } .fit-content { width: -moz-fit-content; width: fit-content; } .align-center { align-items: center; } .justify-center { justify-content: center; } .flex-row { flex-direction: row; } .flex-column { flex-direction: column; } .flex-grow-1 { flex-grow: 1; } .display-block { display: block; } .justify-space-between { justify-content: space-between; } .gap { gap: 10px; } .width-100p, .w-100p { width: 100%; } .h-100p { height: 100%; } .min-height-100p { min-height: 100%; } .height-100p { height: 100%; } .text-primary { color: var(--text-primary); } .text-secondary { color: var(--text-secondary); } .text-tertiary { color: var(--text-tertiary); } .subtitle { display: block; width: -moz-fit-content; width: fit-content; font-size: 16px; margin-block-start: 0px; margin-block-end: 0px; margin-inline-start: 0px; margin-inline-end: 0px; } huanlin-select:not(.hydrated) *, huanlin-carousel-item:not(.hydrated) *, huanlin-carousel:not(.hydrated) *, huanlin-clock:not(.hydrated) *, huanlin-live-editor:not(.hydrated) *, huanlin-mortgage:not(.hydrated) *, huanlin-home:not(.hydrated) *, huanlin-contact:not(.hydrated) *, huanlin-donut:not(.hydrated) *, huanlin-stacked-bar-chart:not(.hydrated) *, huanlin-group-bar-chart:not(.hydrated) *, huanlin-line-chart:not(.hydrated) *, huanlin-pie-chart:not(.hydrated) *, huanlin-bar-chart:not(.hydrated) *, huanlin-state:not(.hydrated) *, huanlin-table:not(.hydrated) *, huanlin-pin-table:not(.hydrated) *, huanlin-icon:not(.hydrated) *, huanlin-nav:not(.hydrated) *, huanlin-nav-item:not(.hydrated) *, huanlin-carousel:not(.hydrated) *, huanlin-carousel-item:not(.hydrated) *, huanlin-input-range:not(.hydrated) *, huanlin-clock:not(.hydrated) *, huanlin-history:not(.hydrated) *, huanlin-dropdown:not(.hydrated) *, huanlin-menu:not(.hydrated) *, huanlin-menu-item:not(.hydrated) *, huanlin-key-pair:not(.hydrated) *, huanlin-light-dark-mode:not(.hydrated) *, huanlin-load:not(.hydrated) *, huanlin-option:not(.hydrated) *, huanlin-select:not(.hydrated) *, huanlin-title-description:not(.hydrated) *, huanlin-notification:not(.hydrated) *, huanlin-input:not(.hydrated) *, huanlin-stepper:not(.hydrated) *, huanlin-step:not(.hydrated) *, huanlin-step-content:not(.hydrated) *, huanlin-textarea:not(.hydrated) *, huanlin-divider:not(.hydrated) *, huanlin-button:not(.hydrated) *, huanlin-checkbox:not(.hydrated) *, huanlin-tag:not(.hydrated) *, huanlin-progress:not(.hydrated) *, huanlin-breadcrumb:not(.hydrated) *, huanlin-breadcrumb-item:not(.hydrated) *, huanlin-app-two-layout:not(.hydrated) *, huanlin-switch:not(.hydrated) *, huanlin-tablist:not(.hydrated) *, huanlin-tab:not(.hydrated) *, huanlin-tab-panel:not(.hydrated) *, huanlin-app:not(.hydrated) *, huanlin-app-one:not(.hydrated) *, huanlin-page-general:not(.hydrated) *, huanlin-app-two:not(.hydrated) *, huanlin-overview-panel:not(.hydrated) *, huanlin-recipient-activity:not(.hydrated) *, huanlin-portal:not(.hydrated) * { display: none !important; } huanlin-suspense [slot=fallback] huanlin-icon { --height: 40px; --width: 40px; --fill: var(--color-primary); animation: spin 2s linear infinite; } @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } } :host { display: flex; width: 100%; flex: 1; overflow: hidden; } .root { font-family: var(--font-family); font-size: 18px; display: grid; width: 100%; grid-template-columns: repeat(4, minmax(240px, 1fr)); grid-template-rows: 100px 1fr 1fr 500px; gap: 8px; } form.five { display: flex; flex-direction: column; box-sizing: border-box; grid-column: 1; grid-row: 2/4; } .six { grid-column: 2/4; grid-row: 2/4; } .seven { display: none; grid-column: 4; grid-row: 2/4; } .eight { grid-column: 2/4; } .eight .subtitle { margin-bottom: 12px; } form label { display: flex; flex-direction: column; } .summary { display: flex; flex-direction: row; justify-content: flex-end; gap: 8px; } .left { display: flex; flex-direction: column; width: 25%; } .middle { width: 50%; } .right { width: 25%; background: var(--background-primary); border-radius: 10px; padding: 20px; box-sizing: border-box; } .main { display: flex; flex-direction: row; gap: 8px; } form input { text-align: right; } form input[type=number]::-webkit-outer-spin-button, form input[type=number]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; } form input[type=number] { -moz-appearance: textfield; } .input { display: flex; align-items: center; } .bar-chart { height: 500px; } huanlin-input-range, .radio-group { margin-bottom: 24px; } fieldset { color: var(--text-tertiary); margin: 0px; padding: 0px; } .radio-group { border: none; } .radio-group-container { display: flex; flex-direction: row; } .radio-group-container .radio:last-child { margin-left: 14px; } .radio-group legend { font-size: 14px; padding: 0px 0px 6px 0px; } .radio { display: flex; flex-direction: row; margin-bottom: 4px; cursor: pointer; } .radio *:hover { cursor: pointer; } .radio input { margin: 0px 4px 0px 0px; background: var(--background-primary); } .radio label { font-size: 14px; color: var(--text-secondary); } button { background: var(--color-primary); border: none; padding: 10px 20px; color: var(--background-primary); border-radius: 4px; cursor: pointer; } button:hover { background: var(--color-primary-hover); } button:active { background: var(--color-primary-active); } huanlin-key-pair huanlin-icon { --height: 50px; --width: 50px; } huanlin-key-pair [slot=icon] svg { display: flex; height: 50px; fill: var(--text-tertiary); } .card { border-radius: 10px; padding: 20px; width: 100%; box-sizing: border-box; background: var(--background-primary); } .toggle-group .toggle { background: transparent; padding: 0; } .toggle-group .toggle huanlin-icon { --fill: var(--text-quaternary); } .toggle-group .toggle.active huanlin-icon { --fill: var(--text-tertiary) ; } .hide { display: none; } @media only screen and (max-width: 800px) { .root { grid-template-columns: unset; grid-template-rows: unset; grid-template-areas: "five" "one" "two" "three" "four" "six" "eight"; } .one { grid-area: one; } .two { grid-area: two; } .three { grid-area: three; } .four { grid-area: four; } form.five { grid-area: five; grid-column: unset; grid-row: unset; } .six { grid-area: six; grid-column: unset; grid-row: unset; } .seven { grid-area: seven; grid-column: unset; grid-row: unset; } .eight { grid-area: eight; } }';var b=`<div class="root">
  <huanlin-key-pair name="paid-off-by" class="one card">
    Paid off By
    <div slot="icon" class="flex align-center justify-center">
      <huanlin-icon name="calendar" style="--height: 50px;"></huanlin-icon>
    </div>
  </huanlin-key-pair>
  <huanlin-key-pair name="total-interest" class="two card">
    Total interest
    <div slot="icon" class="flex align-center justify-center">
      <huanlin-icon name="percent" style="--height: 50px;"></huanlin-icon>
    </div>
  </huanlin-key-pair>
  <huanlin-key-pair name="total-principal" class="three card">
    Mortgage amount
    <div slot="icon" class="flex align-center justify-center">
      <huanlin-icon name="home" style="--height: 50px;"></huanlin-icon>
    </div>
  </huanlin-key-pair>
  <huanlin-key-pair name="monthly-payment" class="four card">
    Monthly payment
    <div slot="icon" class="flex align-center justify-center">
      <huanlin-icon name="dollar" style="--height: 50px;"></huanlin-icon>
    </div>
  </huanlin-key-pair>
  <form class="five card">
    <huanlin-input-range name="mortgage" value="500000" min="5000" max="5000000" step="5000" dollar>
      <div slot="label">Mortgage</div>
    </huanlin-input-range>
    <huanlin-input-range name="down-payment" value="100000" min="5000" max="5000000" step="5000" dollar>
      <div slot="label">Down Payment</div>
    </huanlin-input-range>
    <huanlin-input-range name="interest-rate" value="4" step="0.01" min="" max="30">
      <div slot="label">Interest Rate</div>
    </huanlin-input-range>
    <fieldset class="radio-group">
      <legend>Years</legend>
      <div class="radio-group-container">
        <div class="radio">
          <input id="15y" name="years" type="radio" value="15"></input>
          <label for="15y">15 years</label>
        </div>
        <div class="radio">
          <input id="30y" name="years" type="radio" value="30" checked></input>
          <label for="30y">30 years</label>
        </div>
      </div>
    </fieldset>
    <button type="submit">Calculate</button>
  </form>
  <div class="six card">
    <div class="flex flex-column justify-space-between">
      <div class="flex flex-row justify-space-between align-center width-100p">
        <h2 class="subtitle">Principle, Interest and Balance</h2>
        <div class="toggle-group">
          <button name="stacked-bar-chart" class="toggle active" aria-label="stached bar chart">
            <huanlin-icon name="stacked-bar-chart" style="--height: 24px;"></huanlin-icon>
          </button>
          <button aria-hidden="true" name="donut-chart" class="toggle" aria-label="donut chart">
            <huanlin-icon name="donut-chart" style="--height: 24px;"></huanlin-icon>
          </button>
        </div>
      </div>
      <huanlin-suspense>
        <div slot="fallback" class="flex align-center justify-center h-100p w-100p" style="min-height: 400px;">
          <huanlin-icon name="progress-activity"></huanlin-icon>
        </div>
        <huanlin-stacked-bar-chart class="stacked-bar-chart"></huanlin-stacked-bar-chart>
      </huanlin-suspense>
      <huanlin-donut class="hide" id="total" legend legend-right no-default-event colors='["#4477CE", "#A084E8"]'></huanlin-donut>
    </div>
  </div>
  <div class="seven card">
  </div>
  <div class="eight card">
    <h2 class="subtitle">Summary of years</h2>
    <huanlin-suspense>
      <div slot="fallback" class="flex align-center justify-center h-100p w-100p" style="min-height: 200px;">
        <huanlin-icon name="progress-activity"></huanlin-icon>
      </div>
      <huanlin-table pin="true"></huanlin-table>
    </huanlin-suspense>
  </div>
</div>`;var h=class extends HTMLElement{constructor(){super();a(this,"result");a(this,"isFirstRender",!0);a(this,"monthlyPayment",({mortgage:e,downPayment:n,interestRate:t,year:i})=>{let r=y(t,!1)/1e4/12,s=i*12,u=r*Math.pow(r+1,s),l=Math.pow(r+1,s)-1;return{monthlyPayment:(e-n)*(u/l),mortgage:e,downPayment:n,interestRate:t,year:i}});a(this,"handleLoadDonutChartData",(e,n)=>{clearTimeout(this.tdidLoadDonutData),this.tdidLoadDonutData=setTimeout(()=>{let t=[{type:"Principle",value:Math.ceil(e.totalPrinciplePaid)},{type:"Interest",value:e.totalInterestPaid}];n.setAttribute("data",JSON.stringify(t))})});a(this,"chartToggleOnClick",e=>{let n=e.currentTarget,t=n.getAttribute("name"),i=this.shadowRoot.querySelector("huanlin-stacked-bar-chart"),o=this.shadowRoot.querySelector("#total");t==="stacked-bar-chart"?(o.classList.add("hide"),i.classList.remove("hide"),n.nextElementSibling.classList.remove("active"),n.classList.add("active")):t==="donut-chart"&&(o.classList.remove("hide"),i.classList.add("hide"),n.classList.add("active"),n.previousElementSibling.classList.remove("active"))});a(this,"handleChartToggle",()=>{this.buttonList=Array.from(this.shadowRoot.querySelectorAll(".toggle-group button")),this.buttonList.forEach(e=>{e.addEventListener("click",this.chartToggleOnClick)})});a(this,"handleTableRender",e=>{customElements.whenDefined("huanlin-table").then(()=>{let n=this.shadowRoot.querySelector("huanlin-table"),t=Object.keys(e.stackedBarChartData[0]).map(i=>({label:p(i),name:i}));n.column=t,n.data=e.stackedBarChartData})});a(this,"handleFormSubmit",e=>{e.preventDefault();let n=new FormData(e.currentTarget),t={};for(let l of n)["mortgage","down-payment"].includes(l[0])?t[l[0]]=Number(l[1].split(",").join("")):t[l[0]]=Number(l[1]);if(t["down-payment"]>t.mortgage){alert("Down payment can't be bigger than mortgage");return}let i=this.monthlyPayment({mortgage:t.mortgage,interestRate:Math.floor(t["interest-rate"]*100),downPayment:t["down-payment"],year:t.years}),o=this.shadowRoot.querySelector("[name='total-interest']"),d=this.shadowRoot.querySelector("[name='total-principal']"),r=this.shadowRoot.querySelector("[name='monthly-payment']"),s=this.shadowRoot.querySelector("[name='paid-off-by']");this.result=m(i),o.setAttribute("value",`${this.result.dollarTotalInterestPaid}`),d.setAttribute("value",`${this.result.dollarTotalPrinciplePaid}`),r.setAttribute("value",`${this.result.dollarPayment}`),s.setAttribute("value",`${this.result.paidOffByWhen}`);let u=this.result.stackedBarChartData;this.stackedBarChart.setAttribute("data",JSON.stringify(u)),!this.isFirstRender&&this.handleLoadDonutChartData(this.result,this.totalDonut),this.isFirstRender=!1,this.handleTableRender(this.result)});a(this,"willLoad",()=>{g(this),this.form=this.shadowRoot.querySelector("form");let e=this.shadowRoot.querySelector("button");this.stackedBarChart=this.shadowRoot.querySelector("huanlin-stacked-bar-chart"),this.totalDonut=this.shadowRoot.querySelector("#total"),this.form.addEventListener("submit",this.handleFormSubmit),this.handleChartToggle(),this.observer=new IntersectionObserver(n=>{for(let t of n)t.target===this.stackedBarChart&&t.isIntersecting?customElements.whenDefined("huanlin-stacked-bar-chart").then(()=>{e.click()}):t.target===this.totalDonut&&t.isIntersecting&&customElements.whenDefined("huanlin-donut").then(()=>{this.handleLoadDonutChartData(this.result,this.totalDonut)})}),this.observer.observe(this.stackedBarChart),this.observer.observe(this.totalDonut),this.totalDonut.addEventListener("app-mouseover",this.handleDonutMouseover),this.totalDonut.addEventListener("app-mouseout",this.handleDonutMouseout),this.totalDonut.addEventListener("app-mousemove",this.handleDonutMousemove)});a(this,"handleDonutMouseover",e=>{let{select:n,data:t,color:i,event:o}=e.detail;this.tooltip.style.display="flex",this.tooltip.classList.add("donut"),o.target.style.opacity=1,n(this.tooltip).transition().duration(200).style("opacity",1);let d=this.tooltip.querySelector(".year");d.innerHTML="";let r=this.tooltip.querySelector(".dot");r.style.background=i(t.data.type);let s=this.tooltip.querySelector(".text");s.innerHTML=`${t.data.type} ${c.format(Math.floor(t.data.value))}`});a(this,"handleDonutMouseout",e=>{let{event:n,select:t}=e.detail;n.target.style.opacity=.8,t(this.tooltip).style("opacity",0),t(this.tooltip).style("display","none"),this.tooltip.classList.remove("donut"),this.tooltip.style.display="none"});a(this,"handleDonutMousemove",e=>{let{select:n,event:t}=e.detail;n(this.tooltip).style("left",t.clientX+14+"px").style("top",t.clientY+14+"px")});a(this,"render",()=>{});let e=this.attachShadow({mode:"open"}),n=new CSSStyleSheet;n.replaceSync(f),e.adoptedStyleSheets=[n],e.innerHTML=b}connectedCallback(){this.classList.add("hydrated"),clearTimeout(this.otid),this.otid=setTimeout(()=>{this.willLoad(),this.render()},200)}disconnectedCallback(){var e;(e=this.buttonList)==null||e.forEach(n=>{n.removeEventListener("click",this.chartToggleOnClick)}),this.observer&&this.observer.disconnect(),this.totalDonut&&(this.totalDonut.removeEventListener("app-mouseover",this.handleDonutMouseover),this.totalDonut.removeEventListener("app-mouseout",this.handleDonutMouseout),this.totalDonut.removeEventListener("app-mousemove",this.handleDonutMousemove)),this.form&&this.form.removeEventListener("submit",this.handleFormSubmit)}};a(h,"localName","huanlin-mortgage");export{h as default};
