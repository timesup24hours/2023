import{c as w,h as x}from"./chunk-3E4EKIJL.js";import{a as k,d as S,e as y,f as s,i as $,j as b}from"./chunk-X46VMDJ4.js";import{f as u}from"./chunk-YTPAW67S.js";var L=":host { display: flex; width: 100%; } .tick text { fill: var(--text-secondary); }";var E='<div part="root" class="root"></div>';var v=class extends HTMLElement{constructor(){super();u(this,"willLoad",()=>{});u(this,"render",()=>{var g;let i=this.parentElement;if(!i||!this.shadowRoot)return;let{width:a}=i.getBoundingClientRect();if(this.rootEle=(g=this.shadowRoot)==null?void 0:g.querySelector(".root"),!this.rootEle||a===0)return;this.rootEle.innerHTML="";let f=40,o={top:20,right:20,bottom:30,left:40},p=a-o.left-o.right-f,l=400-o.top-o.bottom,c=$().range([0,p]).padding(.1),r=b().range([l,0]),z=y(r).tickSize(0).tickPadding(10).ticks(2).tickFormat(t=>w(t,{notation:"compact"})),A=S(c).tickSize(0).offset(0).tickPadding(10).tickSizeOuter(0),d=s(this.rootEle).append("svg").attr("width",p+o.left+o.right).attr("height",l+o.top+o.bottom).append("g").attr("transform","translate("+o.left+","+o.top+")"),h=[{month:3,view:2e4},{month:6,view:1e4},{month:9,view:13e3},{month:12,view:13e3},{month:15,view:8e3},{month:18,view:4e3},{month:21,view:16e3},{month:24,view:4e3},{month:27,view:8e3},{month:31,view:8e3}];h.forEach(t=>{t.view=+t.view}),c.domain(h.map(t=>t.month)),r.domain([0,k(h,t=>t.view)]);function C(){return y(r).ticks(5)}d.append("g").attr("class","y grid").call(C().tickSize(-p).tickFormat("")).call(t=>t.selectAll(".tick line").attr("class","y-axis-grid").attr("stroke-dasharray","5").attr("stroke","var(--text-quaternary)")).call(t=>t.select(".domain").remove());function T(t,m){let e=m/1.8,n=10,M=l-r(t.view)-e;return`M${c(t.month)+c.bandwidth()/2-n/2},${r(t.view)+e} a ${e},${e} 0 0 1 ${e},-${e} h${n-2*e}a ${e},${e} 0 0 1 ${e},${e} v${M} h${-n}z`}d.selectAll(".bar").data(h).enter().append("path").attr("class","bar").style("cursor","pointer").attr("width",10).attr("d",t=>T(t,10)).style("fill",t=>"var(--color-primary)").on("mouseover",(t,m)=>{this.tooltip.style.display="flex",s(this.tooltip).transition().duration(200).style("opacity",1);let e=this.tooltip.querySelector(".dot");e.style.background="#555ed1";let n=this.tooltip.querySelector(".text");n.innerHTML=`${m.month} days - ${w(m.view,{notation:"compact"})} views`}).on("mouseout",t=>{s(this.tooltip).style("opacity",0),this.tooltip.style.display="none"}).on("mousemove",t=>{s(this.tooltip).style("left",t.clientX+10+"px").style("top",t.clientY+10+"px")}),d.append("g").attr("class","x axis").attr("transform","translate(0,"+l+")").call(A).call(t=>t.select(".domain").remove()),d.append("g").attr("class","y axis").call(z).call(t=>t.select(".domain").remove())});let i=this.attachShadow({mode:"open"}),a=new CSSStyleSheet;a.replaceSync(L),i.adoptedStyleSheets=[a],i.innerHTML=E}static get observedAttributes(){return["data"]}attributeChangedCallback(i,a,f){this.render()}connectedCallback(){this.classList.add("hydrated"),x(this),setTimeout(()=>{this.willLoad(),this.render(),window.addEventListener("resize",i=>{this.render()})})}disconnectedCallback(){}};export{v as default};
