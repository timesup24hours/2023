import{h as o,i as a}from"./chunk-O7IMYJUU.js";var R='* { margin: 0; padding: 0; box-sizing: border-box; font-family: "Poppins", sans-serif; } input { min-width: 300px; border: 2px solid var(--color-primary); padding: 10px; border-radius: 8px; font-size: 16px; background: var(--background-primary); color: var(--text-primary); width: 100%; } /*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYWNzdXJmaW5nL0Rlc2t0b3AvYXBwL2ZpcnN0L2Zyb250ZW5kL3BsYXlncm91bmQtc2VhcmNoL3Jvb3QvaW5kZXgubW9kdWxlLnNjc3MiLCIlM0NpbnB1dCUyMGNzcyUyMHF5cWFEcyUzRSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFNBQUE7RUFDQSxVQUFBO0VBQ0Esc0JBQUE7RUFDQSxrQ0FBQTtBQ0NGOztBRE9BO0VBQ0UsZ0JBQUE7RUFDQSxzQ0FBQTtFQUNBLGFBQUE7RUFDQSxrQkFBQTtFQUNBLGVBQUE7RUFDQSxxQ0FBQTtFQUNBLDBCQUFBO0VBQ0EsV0FBQTtBQ0pGIiwiZmlsZSI6InRvLmNzcyIsInNvdXJjZXNDb250ZW50IjpbIioge1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGZvbnQtZmFtaWx5OiAnUG9wcGlucycsIHNhbnMtc2VyaWY7XG59XG5ib2R5IHtcbiAgLy8gZGlzcGxheTogZmxleDtcbiAgLy8gYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgLy8ganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIC8vIG1pbi1oZWlnaHQ6IDEwMHZoO1xufVxuaW5wdXQge1xuICBtaW4td2lkdGg6IDMwMHB4O1xuICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1jb2xvci1wcmltYXJ5KTtcbiAgcGFkZGluZzogMTBweDtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBmb250LXNpemU6IDE2cHg7XG4gIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gIGNvbG9yOiB2YXIoLS10ZXh0LXByaW1hcnkpO1xuICB3aWR0aDogMTAwJTtcbn0iLCIqIHtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBmb250LWZhbWlseTogXCJQb3BwaW5zXCIsIHNhbnMtc2VyaWY7XG59XG5cbmlucHV0IHtcbiAgbWluLXdpZHRoOiAzMDBweDtcbiAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tY29sb3ItcHJpbWFyeSk7XG4gIHBhZGRpbmc6IDEwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTtcbiAgd2lkdGg6IDEwMCU7XG59XG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWU2IyOTBJam9pTDFWelpYSnpMMnBoWTNOMWNtWnBibWN2UkdWemEzUnZjQzloY0hBdlptbHljM1F2Wm5KdmJuUmxibVF2Y0d4aGVXZHliM1Z1WkMxelpXRnlZMmd2Y205dmRDSXNJbk52ZFhKalpYTWlPbHNpYVc1a1pYZ3ViVzlrZFd4bExuTmpjM01pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFN1JVRkRSVHRGUVVOQk8wVkJRMEU3UlVGRFFUczdPMEZCVVVZN1JVRkRSVHRGUVVOQk8wVkJRMEU3UlVGRFFUdEZRVU5CTzBWQlEwRTdSVUZEUVR0RlFVTkJJaXdpYzI5MWNtTmxjME52Ym5SbGJuUWlPbHNpS2lCN1hHNGdJRzFoY21kcGJqb2dNRHRjYmlBZ2NHRmtaR2x1WnpvZ01EdGNiaUFnWW05NExYTnBlbWx1WnpvZ1ltOXlaR1Z5TFdKdmVEdGNiaUFnWm05dWRDMW1ZVzFwYkhrNklDZFFiM0J3YVc1ekp5d2djMkZ1Y3kxelpYSnBaanRjYm4xY2JtSnZaSGtnZTF4dUlDQXZMeUJrYVhOd2JHRjVPaUJtYkdWNE8xeHVJQ0F2THlCaGJHbG5iaTFwZEdWdGN6b2dZMlZ1ZEdWeU8xeHVJQ0F2THlCcWRYTjBhV1o1TFdOdmJuUmxiblE2SUdObGJuUmxjanRjYmlBZ0x5OGdiV2x1TFdobGFXZG9kRG9nTVRBd2RtZzdYRzU5WEc1cGJuQjFkQ0I3WEc0Z0lHMXBiaTEzYVdSMGFEb2dNekF3Y0hnN1hHNGdJR0p2Y21SbGNqb2dNbkI0SUhOdmJHbGtJSFpoY2lndExXTnZiRzl5TFhCeWFXMWhjbmtwTzF4dUlDQndZV1JrYVc1bk9pQXhNSEI0TzF4dUlDQmliM0prWlhJdGNtRmthWFZ6T2lBNGNIZzdYRzRnSUdadmJuUXRjMmw2WlRvZ01UWndlRHRjYmlBZ1ltRmphMmR5YjNWdVpEb2dkbUZ5S0MwdFltRmphMmR5YjNWdVpDMXdjbWx0WVhKNUtUdGNiaUFnWTI5c2IzSTZJSFpoY2lndExYUmxlSFF0Y0hKcGJXRnllU2s3WEc0Z0lIZHBaSFJvT2lBeE1EQWxPMXh1ZlNKZGZRPT0gKi8iXX0= */';var B=`<div class="flex flex-row root-list">
  <input type="search"></input>
</div>
<br>
<ul id="stream-error" style="background: var(--failure); color: white;">

</ul>
<ul id="stream-result">

</ul>
`;function h(e){return a(this,null,function*(){return new Promise(t=>{setTimeout(()=>{t(`Fetch ${e} from server 1 completed`)},1e3)})})}function Z(e){return a(this,null,function*(){return new Promise(t=>{setTimeout(()=>{t(`Fetch ${e} from server 2 Completed`)},3e3)})})}function F(e){return a(this,null,function*(){return new Promise(t=>{setTimeout(()=>{t(`Fetch ${e} from server 3 Completed`)},4e3)})})}function g(e){return a(this,null,function*(){return new Promise((t,r)=>{setTimeout(()=>{r(`Fetch ${e} from server 4 error`)},2e3)})})}function x(e){return a(this,null,function*(){return new Promise((t,r)=>{setTimeout(()=>{t(`Fetch ${e} from server 5 Completed`)},5e3)})})}var G=class extends HTMLElement{constructor(){super();o(this,"otid");o(this,"timeStamp");o(this,"pubsub",r=>{let i=[],s=[],n=[],c=r;return{publish:l=>{c===this.timeStamp&&i.forEach(d=>d(l))},subscribe:l=>{c===this.timeStamp&&i.push(l)},unshbscribe:()=>{i=[],s=[],n=[]},getSesults:()=>s,getError:()=>n}});o(this,"takeAllPluginsSearch",({value:r,stream:i})=>{[h,Z,F,g,x].forEach(n=>{typeof n=="function"&&n(r).then(c=>{i.publish({res:c,type:"ok"})}).catch(c=>{i.publish({type:"error",res:c})})})});o(this,"willLoad",()=>{var i,s;let r=document.createElement("style");r.innerHTML=R,this.innerHTML=B,this.appendChild(r),(i=this.querySelector("input"))==null||i.addEventListener("input",n=>{let c=n.target;this.timeStamp=n.timeStamp,this.otid&&clearTimeout(this.otid);let l=this.pubsub(n.timeStamp);l.unshbscribe();let d=this.querySelector("#stream-result"),y=this.querySelector("#stream-error");if(y&&(y.innerHTML=""),!!d){if(!c.value){d.innerHTML="";return}d.innerHTML="loading",n.target&&(this.otid=setTimeout(()=>{this.takeAllPluginsSearch({value:n.target.value,stream:l})},500)),l.subscribe(({type:I,res:b})=>{if(I==="error"){let u=this.querySelector("#stream-error"),m=l.getError();m.push(b);let p=m.map(W=>`<li>${W}</li>`);u&&(u.innerHTML=p.join(""))}else if(b){let u=l.getSesults();u.push(b);let m=this.querySelector("#stream-result"),p=u.map(W=>`<li>${W}</li>`);m&&(m.innerHTML=p.join(""))}})}}),(s=this.querySelector("button"))==null||s.addEventListener("click",n=>{})});o(this,"render",()=>{})}static get observedAttributes(){return[]}attributeChangedCallback(r,i,s){this.render()}connectedCallback(){this.classList.add("hydrated"),this.willLoad(),this.render()}disconnectedCallback(){}};function*V(){try{let e=yield h();console.log(e);let t=yield Z();console.log(t);let r=yield F();console.log(r);let i=yield Promise.allSettled([h(),Z(),F()]);console.log("all",i)}catch(e){console.error("Error occurred:",e)}}function Y(){return a(this,null,function*(){let e=V(),t;for(;;){let{value:r,done:i}=yield e.next(t);if(i)break;t=yield r}})}Y();export{G as default};
//# sourceMappingURL=root-VDTJ4EGS.js.map
