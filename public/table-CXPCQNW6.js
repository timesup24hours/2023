import{b as g}from"./chunk-3E4EKIJL.js";import{f as l}from"./chunk-YTPAW67S.js";var m="* { box-sizing: border-box; } huanlin-table { width: 100%; max-height: calc(100% - 40px); overflow: auto; display: flex; color: var(--text-secondary); --header-cell-padding: 12px 10px; --cell-padding: 10px; } table { white-space: nowrap; margin: 0; border: none; border-collapse: separate; border-spacing: 0; table-layout: fixed; border: 1px solid black; } table td, table th { border: 1px solid black; padding: 0.5rem 1rem; } table thead th:not(.pin) { min-width: 200px; } table thead th { padding: 3px; position: sticky; top: 0; z-index: 1; width: 25vw; background: white; } table, table td, table th { border: none; } table td { background: #fff; padding: 4px 10px; text-align: center; } table tbody th { font-weight: 100; font-style: italic; text-align: left; position: relative; } table thead th.pin { position: sticky; left: 0; z-index: 2; } table tbody th, table tbody td { border-bottom: 2px solid var(--divider-color); } table tbody th { position: sticky; left: 0; background: white; z-index: 1; } table tbody th, table tbody td { background: var(--background-primary); } caption { text-align: left; padding: 0.25rem; position: sticky; left: 0; } .table thead tr th { background-color: var(--header-bg); padding: var(--header-cell-padding); } table button { background: transparent; border: none; display: flex; align-items: center; right: 0; left: 0; top: 0; bottom: 0; height: 16px; width: 100%; text-align: left; padding: 0px; margin: 0px; cursor: pointer; font-size: 14px; font-weight: 500; color: var(--text-tertiary); height: 100%; } table button:hover { background: transparent; } .cell { text-align: left; } table.sortable th huanlin-icon { display: none; } table.sortable th huanlin-icon:part(path) { fill: var(--text-primary); } table.sortable th[aria-sort=descending] huanlin-icon[name=arrow-drop-up] { display: flex; } table.sortable th[aria-sort=ascending] huanlin-icon[name=arrow-drop-down] { display: flex; }";var f=`<table class="table sortable">
  <thead>
    <tr>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>`;var b=class extends HTMLElement{constructor(){super();l(this,"_column");l(this,"_data");l(this,"_pin");l(this,"renderHeader",({column:t,theadRow:e})=>{e.innerHTML="";let n="";this.pin&&(n=`<th class="pin"><input type='checkbox'></th>`),t.forEach((i,h)=>{let c=["principle","interest","balance","year"].includes(i.name)?"number":"";n+=`
        <th class=${c} data-index=${h}>
          <div class="th-container">
            <button>${i.label}
              <div class="icon-container">
              <huanlin-icon name="arrow-drop-up"></huanlin-icon>
              <huanlin-icon name="arrow-drop-down"></huanlin-icon>
              </div>
            </button>
          <div>
        </th>
      `}),e.innerHTML=n});l(this,"renderBody",({data:t,tbody:e,theadRow:n})=>{e.innerHTML="";let i="";t.forEach((h,c)=>{if(this.pin){let s=n.querySelector(".pin"),{width:d}=s.getBoundingClientRect();i+=`<tr><th style="width: ${d}px;">
        <div>
          <input type='checkbox'>
        </div>
        </th>`}else i+="<tr>";Object.entries(h).forEach(([s,d],r)=>{let o=n.querySelector(`[data-index="${r}"]`),{width:u}=(o==null?void 0:o.getBoundingClientRect())||{wdith:200},x=(["principle","interest","balance"].includes(s)?"number":"")?g.format(Math.floor(d)):d;i+=`<td data-value="${d}" style="min-width: ${u}px;">
          <div class="cell">${x}</div>
        </td>`}),i+="</tr>"}),e.innerHTML=i});l(this,"render",()=>{let t=this.querySelector(".table"),e=this.querySelector("thead tr"),n=this.querySelector("tbody");this.column&&this.renderHeader({column:this.column,theadRow:e}),this.data&&this.renderBody({data:this.data,tbody:n,theadRow:e}),new p(t)});let t=document.createElement("style");t.innerHTML=m,this.innerHTML=f,this.appendChild(t)}set column(t){this._column=t,this.render()}get column(){return this._column}set data(t){this._data=t,this.render()}get data(){return this._data}set pin(t){this._pin=t,this.render()}get pin(){return this._pin||this.getAttribute("pin")}static get observedAttributes(){return["column","data","pin"]}attributeChangedCallback(t,e,n){this.render()}connectedCallback(){this.classList.add("hydrated"),this.render()}disconnectedCallback(){}},p=class{constructor(a){l(this,"tableNode");l(this,"columnHeaders");l(this,"sortColumns");this.tableNode=a,this.columnHeaders=Array.from(a.querySelectorAll("thead th")),this.sortColumns=[];for(let t=0;t<this.columnHeaders.length;t++){let n=this.columnHeaders[t].querySelector("button");n&&(this.sortColumns.push(t),n.setAttribute("data-column-index",t),n.addEventListener("click",this.handleClick.bind(this)))}this.tableNode.classList.add("show-unsorted-icon")}setColumnHeaderSort(a){typeof a=="string"&&(a=parseInt(a));for(let t=0;t<this.columnHeaders.length;t++){let e=this.columnHeaders[t],n=e.querySelector("button");t===a?e.getAttribute("aria-sort")==="descending"?(e.setAttribute("aria-sort","ascending"),this.sortColumn(a,"ascending",e.classList.contains("number"))):(e.setAttribute("aria-sort","descending"),this.sortColumn(a,"descending",e.classList.contains("number"))):e.hasAttribute("aria-sort")&&n&&e.removeAttribute("aria-sort")}}sortColumn(a,t,e){function n(r,o){return t==="ascending"?r.value===o.value?0:e?r.value-o.value:r.value<o.value?-1:1:r.value===o.value?0:e?o.value-r.value:r.value>o.value?-1:1}typeof e!="boolean"&&(e=!1);let i=this.tableNode.querySelector("tbody"),h=[],c=[],s=i.firstElementChild,d=0;for(;s;){h.push(s);let o=s.querySelectorAll("th, td")[a],u={};u.index=d,u.value=o.getAttribute("data-value").trim(),e&&(u.value=parseFloat(o.getAttribute("data-value"))),c.push(u),s=s.nextElementSibling,d+=1}for(c.sort(n);i.firstChild;)i.removeChild(i.lastChild);for(let r=0;r<c.length;r+=1)i.appendChild(h[c[r].index])}handleClick(a){let t=a.currentTarget;this.setColumnHeaderSort(t.getAttribute("data-column-index"))}handleOptionChange(a){a.currentTarget.checked?this.tableNode.classList.add("show-unsorted-icon"):this.tableNode.classList.remove("show-unsorted-icon")}};export{b as default};
