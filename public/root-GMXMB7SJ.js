import{h as o,i as a}from"./chunk-O7IMYJUU.js";var R='* { margin: 0; padding: 0; box-sizing: border-box; font-family: "Poppins", sans-serif; } body { display: flex; align-items: center; justify-content: center; min-height: 100vh; } input { border: 2px solid blue; border-radius: 5px; } /*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qYWNzdXJmaW5nL0Rlc2t0b3AvYXBwL2ZpcnN0L2Zyb250ZW5kL3BsYXlncm91bmQtc2VhcmNoL3Jvb3QvaW5kZXgubW9kdWxlLnNjc3MiLCIlM0NpbnB1dCUyMGNzcyUyME1kZzJPZyUzRSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFNBQUE7RUFDQSxVQUFBO0VBQ0Esc0JBQUE7RUFDQSxrQ0FBQTtBQ0NGOztBRENBO0VBQ0UsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7RUFDQSxpQkFBQTtBQ0VGOztBREFBO0VBQ0Usc0JBQUE7RUFDQSxrQkFBQTtBQ0dGIiwiZmlsZSI6InRvLmNzcyIsInNvdXJjZXNDb250ZW50IjpbIioge1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGZvbnQtZmFtaWx5OiAnUG9wcGlucycsIHNhbnMtc2VyaWY7XG59XG5ib2R5IHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIG1pbi1oZWlnaHQ6IDEwMHZoO1xufVxuaW5wdXQge1xuICBib3JkZXI6IDJweCBzb2xpZCBibHVlO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG59IiwiKiB7XG4gIG1hcmdpbjogMDtcbiAgcGFkZGluZzogMDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgZm9udC1mYW1pbHk6IFwiUG9wcGluc1wiLCBzYW5zLXNlcmlmO1xufVxuXG5ib2R5IHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIG1pbi1oZWlnaHQ6IDEwMHZoO1xufVxuXG5pbnB1dCB7XG4gIGJvcmRlcjogMnB4IHNvbGlkIGJsdWU7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbn1cbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZTYjI5MElqb2lMMVZ6WlhKekwycGhZM04xY21acGJtY3ZSR1Z6YTNSdmNDOWhjSEF2Wm1seWMzUXZabkp2Ym5SbGJtUXZjR3hoZVdkeWIzVnVaQzF6WldGeVkyZ3ZjbTl2ZENJc0luTnZkWEpqWlhNaU9sc2lhVzVrWlhndWJXOWtkV3hsTG5OamMzTWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUU3UlVGRFJUdEZRVU5CTzBWQlEwRTdSVUZEUVRzN08wRkJSVVk3UlVGRFJUdEZRVU5CTzBWQlEwRTdSVUZEUVRzN08wRkJSVVk3UlVGRFJUdEZRVU5CSWl3aWMyOTFjbU5sYzBOdmJuUmxiblFpT2xzaUtpQjdYRzRnSUcxaGNtZHBiam9nTUR0Y2JpQWdjR0ZrWkdsdVp6b2dNRHRjYmlBZ1ltOTRMWE5wZW1sdVp6b2dZbTl5WkdWeUxXSnZlRHRjYmlBZ1ptOXVkQzFtWVcxcGJIazZJQ2RRYjNCd2FXNXpKeXdnYzJGdWN5MXpaWEpwWmp0Y2JuMWNibUp2WkhrZ2UxeHVJQ0JrYVhOd2JHRjVPaUJtYkdWNE8xeHVJQ0JoYkdsbmJpMXBkR1Z0Y3pvZ1kyVnVkR1Z5TzF4dUlDQnFkWE4wYVdaNUxXTnZiblJsYm5RNklHTmxiblJsY2p0Y2JpQWdiV2x1TFdobGFXZG9kRG9nTVRBd2RtZzdYRzU5WEc1cGJuQjFkQ0I3WEc0Z0lHSnZjbVJsY2pvZ01uQjRJSE52Ykdsa0lHSnNkV1U3WEc0Z0lHSnZjbVJsY2kxeVlXUnBkWE02SURWd2VEdGNibjBpWFgwPSAqLyJdfQ== */';var U=`<ul id="stream-error" style="background: red; color: white;">

</ul>
<ul id="stream-result">

</ul>
<div class="flex flex-row root-list">
  <input type="search"></input>
</div>
`;function V(e){return a(this,null,function*(){return new Promise(t=>{setTimeout(()=>{t(`Fetch ${e} from server 1 completed`)},1e3)})})}function h(e){return a(this,null,function*(){return new Promise(t=>{setTimeout(()=>{t(`Fetch ${e} from server 2 Completed`)},3e3)})})}function W(e){return a(this,null,function*(){return new Promise(t=>{setTimeout(()=>{t(`Fetch ${e} from server 3 Completed`)},4e3)})})}function X(e){return a(this,null,function*(){return new Promise((t,r)=>{setTimeout(()=>{r(`Fetch ${e} from server 4 error`)},2e3)})})}function B(e){return a(this,null,function*(){return new Promise((t,r)=>{setTimeout(()=>{t(`Fetch ${e} from server 5 Completed`)},5e3)})})}var G=class extends HTMLElement{constructor(){super();o(this,"otid");o(this,"timeStamp");o(this,"pubsub",r=>{let n=[],c=[],i=[],s=r;return{publish:l=>{s===this.timeStamp&&n.forEach(u=>u(l))},subscribe:l=>{s===this.timeStamp&&n.push(l)},unshbscribe:()=>{n=[],c=[],i=[]},getSesults:()=>c,getError:()=>i}});o(this,"takeAllPluginsSearch",({value:r,stream:n})=>{[V,h,W,X,B].forEach(i=>{typeof i=="function"&&i(r).then(s=>{n.publish({res:s,type:"ok"})}).catch(s=>{n.publish({type:"error",res:s})})})});o(this,"willLoad",()=>{var n,c;let r=document.createElement("style");r.innerHTML=R,this.innerHTML=U,this.appendChild(r),(n=this.querySelector("input"))==null||n.addEventListener("input",i=>{let s=i.target;this.timeStamp=i.timeStamp,this.otid&&clearTimeout(this.otid);let l=this.pubsub(i.timeStamp);l.unshbscribe();let u=this.querySelector("#stream-result"),y=this.querySelector("#stream-error");if(y&&(y.innerHTML=""),!!u){if(!s.value){u.innerHTML="";return}u.innerHTML="loading",i.target&&(this.otid=setTimeout(()=>{this.takeAllPluginsSearch({value:i.target.value,stream:l})},500)),l.subscribe(({type:J,res:b})=>{if(J==="error"){let d=this.querySelector("#stream-error"),m=l.getError();m.push(b);let p=m.map(Z=>`<li>${Z}</li>`);d&&(d.innerHTML=p.join(""))}else if(b){let d=l.getSesults();d.push(b);let m=this.querySelector("#stream-result"),p=d.map(Z=>`<li>${Z}</li>`);m&&(m.innerHTML=p.join(""))}})}}),(c=this.querySelector("button"))==null||c.addEventListener("click",i=>{})});o(this,"render",()=>{})}static get observedAttributes(){return[]}attributeChangedCallback(r,n,c){this.render()}connectedCallback(){this.classList.add("hydrated"),this.willLoad(),this.render()}disconnectedCallback(){}};function*g(){try{let e=yield V();console.log(e);let t=yield h();console.log(t);let r=yield W();console.log(r);let n=yield Promise.allSettled([V(),h(),W()]);console.log("all",n)}catch(e){console.error("Error occurred:",e)}}function I(){return a(this,null,function*(){let e=g(),t;for(;;){let{value:r,done:n}=yield e.next(t);if(n)break;t=yield r}})}I();export{G as default};
//# sourceMappingURL=root-GMXMB7SJ.js.map
